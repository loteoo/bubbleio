<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Test hyperapp</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="/css/style.css">

  </head>
  <body>
    <main>

    </main>

    <!-- TODO: use slim socket io -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/main.min.js"></script>

    <script>
      <% if (typeof(state) !== 'undefined') { %>
        main.updateState(<%- JSON.stringify(state) %>);
      <% } %>
      <% if (typeof(joinBubble) !== 'undefined') { %>
        socket.emit('switch room', {
          prevRoomId: null,
          nextRoomId: '<%- joinBubble %>'
        });

        console.log("join room: " + '<%- joinBubble %>');
      <% } %>
      <% if (typeof(joinThread) !== 'undefined') { %>
        socket.emit('join thread', <%- JSON.stringify(joinThread) %>);
        console.log("join thread: " + '<%- joinThread._id %>');
      <% } %>
    </script>
  </body>
</html>

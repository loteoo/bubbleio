{"version":3,"sources":["..\\node_modules\\hyperapp\\src\\index.js","..\\node_modules\\@hyperapp\\router\\src\\Link.js","..\\node_modules\\@hyperapp\\router\\src\\parseRoute.js","..\\node_modules\\@hyperapp\\router\\src\\Route.js","..\\node_modules\\@hyperapp\\router\\src\\Switch.js","..\\node_modules\\@hyperapp\\router\\src\\Redirect.js","..\\node_modules\\@hyperapp\\router\\src\\location.js","..\\node_modules\\@hyperapp\\router\\src\\index.js","utils\\index.js","state\\index.js","..\\node_modules\\deepmerge\\dist\\es.js","..\\node_modules\\socket.io-client\\dist\\socket.io.slim.js","actions\\index.js","views\\components\\MainMenu\\MainMenu.js","views\\common\\Spinner\\Spinner.js","views\\icons\\Up.js","views\\icons\\Down.js","views\\components\\ThreadFooter\\ThreadFooter.js","views\\components\\ThreadItem\\ThreadItem.js","views\\common\\Modal\\Modal.js","views\\components\\NewThreadForm\\NewThreadForm.js","views\\components\\BubbleView\\BubbleView.js","views\\components\\Message\\Message.js","views\\components\\MessageForm\\MessageForm.js","views\\components\\ThreadPanel\\ThreadPanel.js","..\\node_modules\\classcat\\src\\index.js","views\\common\\NiceInput\\NiceInput.js","views\\components\\LoginForm\\LoginForm.js","views\\index.js","client.js","..\\..\\..\\..\\..\\Users\\Alex\\AppData\\Roaming\\npm\\node_modules\\parcel-bundler\\src\\builtins\\bundle-url.js","..\\..\\..\\..\\..\\Users\\Alex\\AppData\\Roaming\\npm\\node_modules\\parcel-bundler\\src\\builtins\\css-loader.js"],"names":["h","app","name","attributes","rest","children","length","arguments","push","node","pop","nodeName","key","state","actions","view","container","map","rootElement","oldNode","recycleElement","lifecycle","skipRender","isRecycling","globalState","clone","wiredActions","wireStateToActions","scheduleRender","element","toLowerCase","call","childNodes","nodeType","nodeValue","resolveNode","render","patch","setTimeout","target","source","out","i","setPartialState","path","value","slice","getPartialState","action","data","result","then","concat","getKey","eventListener","event","currentTarget","events","type","updateAttribute","oldValue","isSvg","style","setProperty","addEventListener","removeEventListener","setAttribute","removeAttribute","createElement","document","createTextNode","createElementNS","oncreate","appendChild","updateElement","oldAttributes","cb","onupdate","removeChildren","ondestroy","removeElement","parent","done","removeChild","onremove","newElement","insertBefore","oldKeyed","newKeyed","oldElements","oldChildren","oldKey","k","newKey","keyedNode","Link","getOrigin","loc","protocol","hostname","port","isExternal","anchorElement","location","props","to","onclick","href","e","defaultPrevented","button","altKey","metaKey","ctrlKey","shiftKey","preventDefault","pathname","history","pushState","parseRoute","createMatch","isExact","url","params","trimTrailingSlash","len","decodeParam","val","decodeURIComponent","options","exact","paths","split","urls","Route","match","Switch","child","Redirect","replaceState","from","wrapHistory","keys","reduce","next","fn","title","dispatchEvent","CustomEvent","detail","window","previous","go","set","subscribe","handleLocationChange","unwrap","isElementInViewport","el","rect","getBoundingClientRect","top","left","bottom","innerHeight","documentElement","clientHeight","right","innerWidth","clientWidth","dontMerge","destination","ObjectId","m","Math","d","Date","s","floor","toString","now","repeat","replace","random","getStateFromStorage","JSON","parse","localStorage","getItem","storeStateInStorage","setItem","stringify","timeSince","date","seconds","interval","shortenText","n","cut","indexOf","substring","shortenString","getYoutubeId","regExp","getVimeoId","bubbles","threads","messages","threadPanelOpened","isMergeableObject","isNonNullObject","isSpecial","stringValue","Object","prototype","isReactElement","canUseSymbol","Symbol","for","REACT_ELEMENT_TYPE","$$typeof","emptyTarget","Array","isArray","cloneUnlessOtherwiseSpecified","deepmerge","defaultArrayMerge","mergeObject","forEach","arrayMerge","sourceIsArray","targetIsArray","sourceAndTargetTypesMatch","all","deepmergeAll","array","Error","prev","deepmerge_1","update","fragment","init","unsubscribe","main","socket","io","connect","on","newState","user","emit","username","openLoginForm","loginForm","opened","MainMenu","UserMenu","bubbleName","openBubbleForm","GuestMenu","BubbleLink","bubble","userCount","Spinner","Up","Down","upvote","thread","voted","threadId","_id","quantity","downvote","ThreadFooter","score","messageCount","ThreadItem","author","createdAt","slideIn","classList","add","remove","slideOut","Close","close","Modal","ev","stopPropagation","newThreadForm","handleNewThreadForm","trashed","userId","bubbleId","NewThreadForm","BubbleView","prevBubbleName","nextBubbleName","calculateRelevance","pow","compareRelevance","a","b","Bubble","filter","sort","Message","message","text","messageForm","handleSubmit","MessageForm","ThreadPanel","prevThreadId","nextThreadId","compareAge","Thread","messageId","cc","classes","hasOwnProperty","NiceInput","label","placeholder","setter","password","mode","LoginForm","console","log","body","bundleURL","getBundleURLCached","getBundleURL","err","matches","stack","getBaseURL","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","parentNode","nextSibling","cssTimeout","reloadCSS","links","querySelectorAll","module"],"mappings":"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","file":"client.962a8f96.map","sourceRoot":"..\\src","sourcesContent":["export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null\n        ? node\n        : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function setPartialState(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? setPartialState(path.slice(1), value, source[path[0]])\n          : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function getPartialState(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(getPartialState(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = getPartialState(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = setPartialState(\n                    path,\n                    clone(state, result),\n                    globalState\n                  ))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      for (var i in clone(oldValue, value)) {\n        var style = value == null || value[i] == null ? \"\" : value[i]\n        if (i[0] === \"-\") {\n          element[name].setProperty(i, style)\n        } else {\n          element[name][i] = style\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (name in element && name !== \"list\" && !isSvg) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey != null && newKey === getKey(oldChildren[i + 1])) {\n          if (oldKey == null) {\n            removeElement(element, oldElements[i], oldChildren[i])\n          }\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","import { h } from \"hyperapp\"\n\nfunction getOrigin(loc) {\n  return loc.protocol + \"//\" + loc.hostname + (loc.port ? \":\" + loc.port : \"\")\n}\n\nfunction isExternal(anchorElement) {\n  // Location.origin and HTMLAnchorElement.origin are not\n  // supported by IE and Safari.\n  return getOrigin(location) !== getOrigin(anchorElement)\n}\n\nexport function Link(props, children) {\n  return function(state, actions) {\n    var to = props.to\n    var location = state.location\n    var onclick = props.onclick\n    delete props.to\n    delete props.location\n\n    props.href = to\n    props.onclick = function(e) {\n      if (onclick) {\n        onclick(e)\n      }\n      if (\n        e.defaultPrevented ||\n        e.button !== 0 ||\n        e.altKey ||\n        e.metaKey ||\n        e.ctrlKey ||\n        e.shiftKey ||\n        props.target === \"_blank\" ||\n        isExternal(e.currentTarget)\n      ) {\n      } else {\n        e.preventDefault()\n\n        if (to !== location.pathname) {\n          history.pushState(location.pathname, \"\", to)\n        }\n      }\n    }\n\n    return h(\"a\", props, children)\n  }\n}\n","function createMatch(isExact, path, url, params) {\n  return {\n    isExact: isExact,\n    path: path,\n    url: url,\n    params: params\n  }\n}\n\nfunction trimTrailingSlash(url) {\n  for (var len = url.length; \"/\" === url[--len]; );\n  return url.slice(0, len + 1)\n}\n\nfunction decodeParam(val) {\n  try {\n    return decodeURIComponent(val)\n  } catch (e) {\n    return val\n  }\n}\n\nexport function parseRoute(path, url, options) {\n  if (path === url || !path) {\n    return createMatch(path === url, path, url)\n  }\n\n  var exact = options && options.exact\n  var paths = trimTrailingSlash(path).split(\"/\")\n  var urls = trimTrailingSlash(url).split(\"/\")\n\n  if (paths.length > urls.length || (exact && paths.length < urls.length)) {\n    return\n  }\n\n  for (var i = 0, params = {}, len = paths.length, url = \"\"; i < len; i++) {\n    if (\":\" === paths[i][0]) {\n      params[paths[i].slice(1)] = urls[i] = decodeParam(urls[i])\n    } else if (paths[i] !== urls[i]) {\n      return\n    }\n    url += urls[i] + \"/\"\n  }\n\n  return createMatch(false, path, url.slice(0, -1), params)\n}\n","import { parseRoute } from \"./parseRoute\"\n\nexport function Route(props) {\n  return function(state, actions) {\n    var location = state.location\n    var match = parseRoute(props.path, location.pathname, {\n      exact: !props.parent\n    })\n\n    return (\n      match &&\n      props.render({\n        match: match,\n        location: location\n      })\n    )\n  }\n}\n","export function Switch(props, children) {\n  return function(state, actions) {\n    var child,\n      i = 0\n    while (\n      !(child = children[i] && children[i](state, actions)) &&\n      i < children.length\n    )\n      i++\n    return child\n  }\n}\n","export function Redirect(props) {\n  return function(state, actions) {\n    var location = state.location\n    history.replaceState(props.from || location.pathname, \"\", props.to)\n  }\n}\n","function wrapHistory(keys) {\n  return keys.reduce(function(next, key) {\n    var fn = history[key]\n\n    history[key] = function(data, title, url) {\n      fn.call(this, data, title, url)\n      dispatchEvent(new CustomEvent(\"pushstate\", { detail: data }))\n    }\n\n    return function() {\n      history[key] = fn\n      next && next()\n    }\n  }, null)\n}\n\nexport var location = {\n  state: {\n    pathname: window.location.pathname,\n    previous: window.location.pathname\n  },\n  actions: {\n    go: function(pathname) {\n      history.pushState(null, \"\", pathname)\n    },\n    set: function(data) {\n      return data\n    }\n  },\n  subscribe: function(actions) {\n    function handleLocationChange(e) {\n      actions.set({\n        pathname: window.location.pathname,\n        previous: e.detail\n          ? (window.location.previous = e.detail)\n          : window.location.previous\n      })\n    }\n\n    var unwrap = wrapHistory([\"pushState\", \"replaceState\"])\n\n    addEventListener(\"pushstate\", handleLocationChange)\n    addEventListener(\"popstate\", handleLocationChange)\n\n    return function() {\n      removeEventListener(\"pushstate\", handleLocationChange)\n      removeEventListener(\"popstate\", handleLocationChange)\n      unwrap()\n    }\n  }\n}\n","export { Link } from \"./Link\"\nexport { Route } from \"./Route\"\nexport { Switch } from \"./Switch\"\nexport { Redirect } from \"./Redirect\"\nexport { location } from \"./location\"\n","\r\n\r\n\r\nexport const isElementInViewport = (el) => {\r\n  let rect = el.getBoundingClientRect();\r\n  return (\r\n    rect.top >= 0 &&\r\n    rect.left >= 0 &&\r\n    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\r\n    rect.right <= (window.innerWidth || document.documentElement.clientWidth)\r\n  );\r\n}\r\n\r\n\r\n\r\nexport const dontMerge = (destination, source) => source;\r\n\r\nexport const ObjectId = (m = Math, d = Date, h = 16, s = s => m.floor(s).toString(h)) => s(d.now() / 1000) + ' '.repeat(h).replace(/./g, () => s(m.random() * h))\r\n\r\nexport const getStateFromStorage = () => JSON.parse(window.localStorage.getItem('bubbleio'))\r\n\r\nexport const storeStateInStorage = (state) => {\r\n  window.localStorage.setItem('bubbleio', JSON.stringify(state));\r\n  return state;\r\n}\r\n\r\n\r\n\r\nexport const timeSince = (date) => {\r\n\r\n  let seconds = Math.floor((new Date() - new Date(date)) / 1000);\r\n\r\n  let interval = Math.floor(seconds / 31536000);\r\n  if (interval >= 1) {\r\n    return interval + \" years ago\";\r\n  }\r\n\r\n  interval = Math.floor(seconds / 2592000);\r\n  if (interval >= 1) {\r\n    return interval + \" months ago\";\r\n  }\r\n\r\n  interval = Math.floor(seconds / 86400);\r\n  if (interval == 1) {\r\n    return \"yesterday\";\r\n  }\r\n\r\n  if (interval >= 1) {\r\n    return interval + \" days ago\";\r\n  }\r\n\r\n  interval = Math.floor(seconds / 3600);\r\n  if (interval >= 1) {\r\n    return interval + \" hours ago\";\r\n  }\r\n\r\n  interval = Math.floor(seconds / 60);\r\n  if (interval >= 1) {\r\n    return interval + \" minutes ago\";\r\n  }\r\n\r\n  if (seconds > 1) {\r\n    return Math.floor(seconds) + \" seconds ago\";\r\n  }\r\n  \r\n  return \"now\";\r\n}\r\n\r\n\r\n\r\n\r\nexport const shortenText = (s, n) => {\r\n  if (s.length > n+3) {\r\n    let cut = s.indexOf(' ', n);\r\n    if(cut == -1) return s;\r\n    return s.substring(0, cut) + \"...\"\r\n  } else {\r\n    return s;\r\n  }\r\n}\r\n\r\nexport const shortenString = (s, n) => {\r\n  if (s.length > n+3) {\r\n    return s.substring(0, n) + \"...\";\r\n  } else {\r\n    return s;\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const getYoutubeId = url => {\r\n  let regExp = /^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#\\&\\?]*).*/;\r\n  let match = url.match(regExp);\r\n  return (match&&match[7].length==11)? match[7] : false;\r\n}\r\n\r\n\r\n\r\nexport const getVimeoId = url => {\r\n  let m = url.match(/^.+vimeo.com\\/(.*\\/)?([^#\\?]*)/);\r\n  return m ? m[2] || m[1] : null;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// const getSortedThreadsArray = threads => {\r\n\r\n//   // Calculate relevance score for each threads\r\n//   for (var i = 0; i < threads.length; i++) {\r\n    \r\n//     // Score = (P-1) / (T+2)^G\r\n//     //\r\n//     // where,\r\n//     // P = points of an item (and -1 is to negate submitters vote)\r\n//     // T = time since submission (in hours)\r\n//     // G = Gravity, defaults to 1.8\r\n\r\n//     // Todo: query message count\r\n//     if (!threads[i].messages) {\r\n//       threads[i].messages = [];\r\n//     }\r\n\r\n//     threads[i].relevance = (threads[i].score + (threads[i].messages.length/2) + 1) / Math.pow(((new Date() - threads[i].created) / 3600000), 1.8);\r\n//   }\r\n\r\n//   // Sort by relevance\r\n//   threads.sort(compareRelevance);\r\n\r\n//   // Build id array\r\n//   let sortedThreads = [];\r\n//   for (var i = 0; i < threads.length; i++) {\r\n//     sortedThreads.push(threads[i]._id);\r\n//   }\r\n\r\n//   return sortedThreads;\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n","import {location} from \"@hyperapp/router\"\r\nimport {getStateFromStorage} from '../utils/'\r\n\r\nexport const state = getStateFromStorage() || {\r\n  location: location.state,\r\n  bubbles: {},\r\n  threads: {},\r\n  messages: {},\r\n  threadPanelOpened: true\r\n}\r\n","var isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tObject.keys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tObject.keys(source).forEach(function(key) {\n\t\tif (!options.isMergeableObject(source[key]) || !target[key]) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = deepmerge(target[key], source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nexport default deepmerge_1;\n","/*!\n * Socket.IO v2.1.1\n * (c) 2014-2018 Guillermo Rauch\n * Released under the MIT License.\n */\n!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.io=e():t.io=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p=\"\",e(0)}([function(t,e,r){\"use strict\";function n(t,e){\"object\"===(\"undefined\"==typeof t?\"undefined\":o(t))&&(e=t,t=void 0),e=e||{};var r,n=i(t),s=n.source,h=n.id,p=n.path,u=c[h]&&p in c[h].nsps,f=e.forceNew||e[\"force new connection\"]||!1===e.multiplex||u;return f?r=a(s,e):(c[h]||(c[h]=a(s,e)),r=c[h]),n.query&&!e.query&&(e.query=n.query),r.socket(n.path,e)}var o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},i=r(1),s=r(4),a=r(9);r(3)(\"socket.io-client\");t.exports=e=n;var c=e.managers={};e.protocol=s.protocol,e.connect=n,e.Manager=r(9),e.Socket=r(34)},function(t,e,r){(function(e){\"use strict\";function n(t,r){var n=t;r=r||e.location,null==t&&(t=r.protocol+\"//\"+r.host),\"string\"==typeof t&&(\"/\"===t.charAt(0)&&(t=\"/\"===t.charAt(1)?r.protocol+t:r.host+t),/^(https?|wss?):\\/\\//.test(t)||(t=\"undefined\"!=typeof r?r.protocol+\"//\"+t:\"https://\"+t),n=o(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port=\"80\":/^(http|ws)s$/.test(n.protocol)&&(n.port=\"443\")),n.path=n.path||\"/\";var i=n.host.indexOf(\":\")!==-1,s=i?\"[\"+n.host+\"]\":n.host;return n.id=n.protocol+\"://\"+s+\":\"+n.port,n.href=n.protocol+\"://\"+s+(r&&r.port===n.port?\"\":\":\"+n.port),n}var o=r(2);r(3)(\"socket.io-client:url\");t.exports=n}).call(e,function(){return this}())},function(t,e){var r=/^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/,n=[\"source\",\"protocol\",\"authority\",\"userInfo\",\"user\",\"password\",\"host\",\"port\",\"relative\",\"path\",\"directory\",\"file\",\"query\",\"anchor\"];t.exports=function(t){var e=t,o=t.indexOf(\"[\"),i=t.indexOf(\"]\");o!=-1&&i!=-1&&(t=t.substring(0,o)+t.substring(o,i).replace(/:/g,\";\")+t.substring(i,t.length));for(var s=r.exec(t||\"\"),a={},c=14;c--;)a[n[c]]=s[c]||\"\";return o!=-1&&i!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,\":\"),a.authority=a.authority.replace(\"[\",\"\").replace(\"]\",\"\").replace(/;/g,\":\"),a.ipv6uri=!0),a}},function(t,e){\"use strict\";t.exports=function(){return function(){}}},function(t,e,r){function n(){}function o(t){var r=\"\"+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(r+=t.attachments+\"-\"),t.nsp&&\"/\"!==t.nsp&&(r+=t.nsp+\",\"),null!=t.id&&(r+=t.id),null!=t.data){var n=i(t.data);if(n===!1)return m;r+=n}return r}function i(t){try{return JSON.stringify(t)}catch(t){return!1}}function s(t,e){function r(t){var r=l.deconstructPacket(t),n=o(r.packet),i=r.buffers;i.unshift(n),e(i)}l.removeBlobs(t,r)}function a(){this.reconstructor=null}function c(t){var r=0,n={type:Number(t.charAt(0))};if(null==e.types[n.type])return u(\"unknown packet type \"+n.type);if(e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type){for(var o=\"\";\"-\"!==t.charAt(++r)&&(o+=t.charAt(r),r!=t.length););if(o!=Number(o)||\"-\"!==t.charAt(r))throw new Error(\"Illegal attachments\");n.attachments=Number(o)}if(\"/\"===t.charAt(r+1))for(n.nsp=\"\";++r;){var i=t.charAt(r);if(\",\"===i)break;if(n.nsp+=i,r===t.length)break}else n.nsp=\"/\";var s=t.charAt(r+1);if(\"\"!==s&&Number(s)==s){for(n.id=\"\";++r;){var i=t.charAt(r);if(null==i||Number(i)!=i){--r;break}if(n.id+=t.charAt(r),r===t.length)break}n.id=Number(n.id)}if(t.charAt(++r)){var a=h(t.substr(r)),c=a!==!1&&(n.type===e.ERROR||d(a));if(!c)return u(\"invalid payload\");n.data=a}return n}function h(t){try{return JSON.parse(t)}catch(t){return!1}}function p(t){this.reconPack=t,this.buffers=[]}function u(t){return{type:e.ERROR,data:\"parser error: \"+t}}var f=(r(3)(\"socket.io-parser\"),r(5)),l=r(6),d=r(7),y=r(8);e.protocol=4,e.types=[\"CONNECT\",\"DISCONNECT\",\"EVENT\",\"ACK\",\"ERROR\",\"BINARY_EVENT\",\"BINARY_ACK\"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=n,e.Decoder=a;var m=e.ERROR+'\"encode error\"';n.prototype.encode=function(t,r){if(e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type)s(t,r);else{var n=o(t);r([n])}},f(a.prototype),a.prototype.add=function(t){var r;if(\"string\"==typeof t)r=c(t),e.BINARY_EVENT===r.type||e.BINARY_ACK===r.type?(this.reconstructor=new p(r),0===this.reconstructor.reconPack.attachments&&this.emit(\"decoded\",r)):this.emit(\"decoded\",r);else{if(!y(t)&&!t.base64)throw new Error(\"Unknown type: \"+t);if(!this.reconstructor)throw new Error(\"got binary data when not reconstructing a packet\");r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,this.emit(\"decoded\",r))}},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=l.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,r){function n(t){if(t)return o(t)}function o(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[\"$\"+t]=this._callbacks[\"$\"+t]||[]).push(e),this},n.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[\"$\"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[\"$\"+t],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===e||n.fn===e){r.splice(o,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[\"$\"+t];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[\"$\"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,r){(function(t){function n(t,e){if(!t)return t;if(s(t)){var r={_placeholder:!0,num:e.length};return e.push(t),r}if(i(t)){for(var o=new Array(t.length),a=0;a<t.length;a++)o[a]=n(t[a],e);return o}if(\"object\"==typeof t&&!(t instanceof Date)){var o={};for(var c in t)o[c]=n(t[c],e);return o}return t}function o(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(i(t))for(var r=0;r<t.length;r++)t[r]=o(t[r],e);else if(\"object\"==typeof t)for(var n in t)t[n]=o(t[n],e);return t}var i=r(7),s=r(8),a=Object.prototype.toString,c=\"function\"==typeof t.Blob||\"[object BlobConstructor]\"===a.call(t.Blob),h=\"function\"==typeof t.File||\"[object FileConstructor]\"===a.call(t.File);e.deconstructPacket=function(t){var e=[],r=t.data,o=t;return o.data=n(r,e),o.attachments=e.length,{packet:o,buffers:e}},e.reconstructPacket=function(t,e){return t.data=o(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){function r(t,a,p){if(!t)return t;if(c&&t instanceof Blob||h&&t instanceof File){n++;var u=new FileReader;u.onload=function(){p?p[a]=this.result:o=this.result,--n||e(o)},u.readAsArrayBuffer(t)}else if(i(t))for(var f=0;f<t.length;f++)r(t[f],f,t);else if(\"object\"==typeof t&&!s(t))for(var l in t)r(t[l],l,t)}var n=0,o=t;r(o),n||e(o)}}).call(e,function(){return this}())},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return\"[object Array]\"==r.call(t)}},function(t,e){(function(e){function r(t){return n&&e.Buffer.isBuffer(t)||o&&(t instanceof e.ArrayBuffer||i(t))}t.exports=r;var n=\"function\"==typeof e.Buffer&&\"function\"==typeof e.Buffer.isBuffer,o=\"function\"==typeof e.ArrayBuffer,i=function(){return o&&\"function\"==typeof e.ArrayBuffer.isView?e.ArrayBuffer.isView:function(t){return t.buffer instanceof e.ArrayBuffer}}()}).call(e,function(){return this}())},function(t,e,r){\"use strict\";function n(t,e){if(!(this instanceof n))return new n(t,e);t&&\"object\"===(\"undefined\"==typeof t?\"undefined\":o(t))&&(e=t,t=void 0),e=e||{},e.path=e.path||\"/socket.io\",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState=\"closed\",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var r=e.parser||c;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=e.autoConnect!==!1,this.autoConnect&&this.open()}var o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},i=r(10),s=r(34),a=r(5),c=r(4),h=r(36),p=r(37),u=(r(3)(\"socket.io-client:manager\"),r(33)),f=r(38),l=Object.prototype.hasOwnProperty;t.exports=n,n.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)l.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},n.prototype.updateSocketIds=function(){for(var t in this.nsps)l.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},n.prototype.generateId=function(t){return(\"/\"===t?\"\":t+\"#\")+this.engine.id},a(n.prototype),n.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},n.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},n.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},n.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},n.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},n.prototype.open=n.prototype.connect=function(t,e){if(~this.readyState.indexOf(\"open\"))return this;this.engine=i(this.uri,this.opts);var r=this.engine,n=this;this.readyState=\"opening\",this.skipReconnect=!1;var o=h(r,\"open\",function(){n.onopen(),t&&t()}),s=h(r,\"error\",function(e){if(n.cleanup(),n.readyState=\"closed\",n.emitAll(\"connect_error\",e),t){var r=new Error(\"Connection error\");r.data=e,t(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout,c=setTimeout(function(){o.destroy(),r.close(),r.emit(\"error\",\"timeout\"),n.emitAll(\"connect_timeout\",a)},a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(s),this},n.prototype.onopen=function(){this.cleanup(),this.readyState=\"open\",this.emit(\"open\");var t=this.engine;this.subs.push(h(t,\"data\",p(this,\"ondata\"))),this.subs.push(h(t,\"ping\",p(this,\"onping\"))),this.subs.push(h(t,\"pong\",p(this,\"onpong\"))),this.subs.push(h(t,\"error\",p(this,\"onerror\"))),this.subs.push(h(t,\"close\",p(this,\"onclose\"))),this.subs.push(h(this.decoder,\"decoded\",p(this,\"ondecoded\")))},n.prototype.onping=function(){this.lastPing=new Date,this.emitAll(\"ping\")},n.prototype.onpong=function(){this.emitAll(\"pong\",new Date-this.lastPing)},n.prototype.ondata=function(t){this.decoder.add(t)},n.prototype.ondecoded=function(t){this.emit(\"packet\",t)},n.prototype.onerror=function(t){this.emitAll(\"error\",t)},n.prototype.socket=function(t,e){function r(){~u(o.connecting,n)||o.connecting.push(n)}var n=this.nsps[t];if(!n){n=new s(this,t,e),this.nsps[t]=n;var o=this;n.on(\"connecting\",r),n.on(\"connect\",function(){n.id=o.generateId(t)}),this.autoConnect&&r()}return n},n.prototype.destroy=function(t){var e=u(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},n.prototype.packet=function(t){var e=this;t.query&&0===t.type&&(t.nsp+=\"?\"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(r){for(var n=0;n<r.length;n++)e.engine.write(r[n],t.options);e.encoding=!1,e.processPacketQueue()}))},n.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},n.prototype.cleanup=function(){for(var t=this.subs.length,e=0;e<t;e++){var r=this.subs.shift();r.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){this.skipReconnect=!0,this.reconnecting=!1,\"opening\"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState=\"closed\",this.engine&&this.engine.close()},n.prototype.onclose=function(t){this.cleanup(),this.backoff.reset(),this.readyState=\"closed\",this.emit(\"close\",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitAll(\"reconnect_failed\"),this.reconnecting=!1;else{var e=this.backoff.duration();this.reconnecting=!0;var r=setTimeout(function(){t.skipReconnect||(t.emitAll(\"reconnect_attempt\",t.backoff.attempts),t.emitAll(\"reconnecting\",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(t.reconnecting=!1,t.reconnect(),t.emitAll(\"reconnect_error\",e.data)):t.onreconnect()}))},e);this.subs.push({destroy:function(){clearTimeout(r)}})}},n.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll(\"reconnect\",t)}},function(t,e,r){t.exports=r(11),t.exports.parser=r(18)},function(t,e,r){(function(e){function n(t,r){if(!(this instanceof n))return new n(t,r);r=r||{},t&&\"object\"==typeof t&&(r=t,t=null),t?(t=h(t),r.hostname=t.host,r.secure=\"https\"===t.protocol||\"wss\"===t.protocol,r.port=t.port,t.query&&(r.query=t.query)):r.host&&(r.hostname=h(r.host).host),this.secure=null!=r.secure?r.secure:e.location&&\"https:\"===location.protocol,r.hostname&&!r.port&&(r.port=this.secure?\"443\":\"80\"),this.agent=r.agent||!1,this.hostname=r.hostname||(e.location?location.hostname:\"localhost\"),this.port=r.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=r.query||{},\"string\"==typeof this.query&&(this.query=p.decode(this.query)),this.upgrade=!1!==r.upgrade,this.path=(r.path||\"/engine.io\").replace(/\\/$/,\"\")+\"/\",this.forceJSONP=!!r.forceJSONP,this.jsonp=!1!==r.jsonp,this.forceBase64=!!r.forceBase64,this.enablesXDR=!!r.enablesXDR,this.timestampParam=r.timestampParam||\"t\",this.timestampRequests=r.timestampRequests,this.transports=r.transports||[\"polling\",\"websocket\"],this.transportOptions=r.transportOptions||{},this.readyState=\"\",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=r.policyPort||843,this.rememberUpgrade=r.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=r.onlyBinaryUpgrades,this.perMessageDeflate=!1!==r.perMessageDeflate&&(r.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=r.pfx||null,this.key=r.key||null,this.passphrase=r.passphrase||null,this.cert=r.cert||null,this.ca=r.ca||null,this.ciphers=r.ciphers||null,this.rejectUnauthorized=void 0===r.rejectUnauthorized||r.rejectUnauthorized,this.forceNode=!!r.forceNode;var o=\"object\"==typeof e&&e;o.global===o&&(r.extraHeaders&&Object.keys(r.extraHeaders).length>0&&(this.extraHeaders=r.extraHeaders),r.localAddress&&(this.localAddress=r.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function o(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var i=r(12),s=r(5),a=(r(3)(\"engine.io-client:socket\"),r(33)),c=r(18),h=r(2),p=r(27);t.exports=n,n.priorWebsocketSuccess=!1,s(n.prototype),n.protocol=c.protocol,n.Socket=n,n.Transport=r(17),n.transports=r(12),n.parser=r(18),n.prototype.createTransport=function(t){var e=o(this.query);e.EIO=c.protocol,e.transport=t;var r=this.transportOptions[t]||{};this.id&&(e.sid=this.id);var n=new i[t]({query:e,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0});return n},n.prototype.open=function(){var t;if(this.rememberUpgrade&&n.priorWebsocketSuccess&&this.transports.indexOf(\"websocket\")!==-1)t=\"websocket\";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit(\"error\",\"No transports available\")},0)}t=this.transports[0]}this.readyState=\"opening\";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},n.prototype.setTransport=function(t){var e=this;this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on(\"drain\",function(){e.onDrain()}).on(\"packet\",function(t){e.onPacket(t)}).on(\"error\",function(t){e.onError(t)}).on(\"close\",function(){e.onClose(\"transport close\")})},n.prototype.probe=function(t){function e(){if(u.onlyBinaryUpgrades){var t=!this.supportsBinary&&u.transport.supportsBinary;p=p||t}p||(h.send([{type:\"ping\",data:\"probe\"}]),h.once(\"packet\",function(t){if(!p)if(\"pong\"===t.type&&\"probe\"===t.data){if(u.upgrading=!0,u.emit(\"upgrading\",h),!h)return;n.priorWebsocketSuccess=\"websocket\"===h.name,u.transport.pause(function(){p||\"closed\"!==u.readyState&&(c(),u.setTransport(h),h.send([{type:\"upgrade\"}]),u.emit(\"upgrade\",h),h=null,u.upgrading=!1,u.flush())})}else{var e=new Error(\"probe error\");e.transport=h.name,u.emit(\"upgradeError\",e)}}))}function r(){p||(p=!0,c(),h.close(),h=null)}function o(t){var e=new Error(\"probe error: \"+t);e.transport=h.name,r(),u.emit(\"upgradeError\",e)}function i(){o(\"transport closed\")}function s(){o(\"socket closed\")}function a(t){h&&t.name!==h.name&&r()}function c(){h.removeListener(\"open\",e),h.removeListener(\"error\",o),h.removeListener(\"close\",i),u.removeListener(\"close\",s),u.removeListener(\"upgrading\",a)}var h=this.createTransport(t,{probe:1}),p=!1,u=this;n.priorWebsocketSuccess=!1,h.once(\"open\",e),h.once(\"error\",o),h.once(\"close\",i),this.once(\"close\",s),this.once(\"upgrading\",a),h.open()},n.prototype.onOpen=function(){if(this.readyState=\"open\",n.priorWebsocketSuccess=\"websocket\"===this.transport.name,this.emit(\"open\"),this.flush(),\"open\"===this.readyState&&this.upgrade&&this.transport.pause)for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])},n.prototype.onPacket=function(t){if(\"opening\"===this.readyState||\"open\"===this.readyState||\"closing\"===this.readyState)switch(this.emit(\"packet\",t),this.emit(\"heartbeat\"),t.type){case\"open\":this.onHandshake(JSON.parse(t.data));break;case\"pong\":this.setPing(),this.emit(\"pong\");break;case\"error\":var e=new Error(\"server error\");e.code=t.data,this.onError(e);break;case\"message\":this.emit(\"data\",t.data),this.emit(\"message\",t.data)}},n.prototype.onHandshake=function(t){this.emit(\"handshake\",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),\"closed\"!==this.readyState&&(this.setPing(),this.removeListener(\"heartbeat\",this.onHeartbeat),this.on(\"heartbeat\",this.onHeartbeat))},n.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){\"closed\"!==e.readyState&&e.onClose(\"ping timeout\")},t||e.pingInterval+e.pingTimeout)},n.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},n.prototype.ping=function(){var t=this;this.sendPacket(\"ping\",function(){t.emit(\"ping\")})},n.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit(\"drain\"):this.flush()},n.prototype.flush=function(){\"closed\"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit(\"flush\"))},n.prototype.write=n.prototype.send=function(t,e,r){return this.sendPacket(\"message\",t,e,r),this},n.prototype.sendPacket=function(t,e,r,n){if(\"function\"==typeof e&&(n=e,e=void 0),\"function\"==typeof r&&(n=r,r=null),\"closing\"!==this.readyState&&\"closed\"!==this.readyState){r=r||{},r.compress=!1!==r.compress;var o={type:t,data:e,options:r};this.emit(\"packetCreate\",o),this.writeBuffer.push(o),n&&this.once(\"flush\",n),this.flush()}},n.prototype.close=function(){function t(){n.onClose(\"forced close\"),n.transport.close()}function e(){n.removeListener(\"upgrade\",e),n.removeListener(\"upgradeError\",e),t()}function r(){n.once(\"upgrade\",e),n.once(\"upgradeError\",e)}if(\"opening\"===this.readyState||\"open\"===this.readyState){this.readyState=\"closing\";var n=this;this.writeBuffer.length?this.once(\"drain\",function(){this.upgrading?r():t()}):this.upgrading?r():t()}return this},n.prototype.onError=function(t){n.priorWebsocketSuccess=!1,this.emit(\"error\",t),this.onClose(\"transport error\",t)},n.prototype.onClose=function(t,e){if(\"opening\"===this.readyState||\"open\"===this.readyState||\"closing\"===this.readyState){var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners(\"close\"),this.transport.close(),this.transport.removeAllListeners(),this.readyState=\"closed\",this.id=null,this.emit(\"close\",t,e),r.writeBuffer=[],r.prevBufferLen=0}},n.prototype.filterUpgrades=function(t){for(var e=[],r=0,n=t.length;r<n;r++)~a(this.transports,t[r])&&e.push(t[r]);return e}}).call(e,function(){return this}())},function(t,e,r){(function(t){function n(e){var r,n=!1,a=!1,c=!1!==e.jsonp;if(t.location){var h=\"https:\"===location.protocol,p=location.port;p||(p=h?443:80),n=e.hostname!==location.hostname||p!==e.port,a=e.secure!==h}if(e.xdomain=n,e.xscheme=a,r=new o(e),\"open\"in r&&!e.forceJSONP)return new i(e);if(!c)throw new Error(\"JSONP disabled\");return new s(e)}var o=r(13),i=r(15),s=r(30),a=r(31);e.polling=n,e.websocket=a}).call(e,function(){return this}())},function(t,e,r){(function(e){var n=r(14);t.exports=function(t){var r=t.xdomain,o=t.xscheme,i=t.enablesXDR;try{if(\"undefined\"!=typeof XMLHttpRequest&&(!r||n))return new XMLHttpRequest}catch(t){}try{if(\"undefined\"!=typeof XDomainRequest&&!o&&i)return new XDomainRequest}catch(t){}if(!r)try{return new(e[[\"Active\"].concat(\"Object\").join(\"X\")])(\"Microsoft.XMLHTTP\")}catch(t){}}}).call(e,function(){return this}())},function(t,e){try{t.exports=\"undefined\"!=typeof XMLHttpRequest&&\"withCredentials\"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e,r){(function(e){function n(){}function o(t){if(c.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,e.location){var r=\"https:\"===location.protocol,n=location.port;n||(n=r?443:80),this.xd=t.hostname!==e.location.hostname||n!==t.port,this.xs=t.secure!==r}}function i(t){this.method=t.method||\"GET\",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function s(){for(var t in i.requests)i.requests.hasOwnProperty(t)&&i.requests[t].abort()}var a=r(13),c=r(16),h=r(5),p=r(28);r(3)(\"engine.io-client:polling-xhr\");t.exports=o,t.exports.Request=i,p(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new i(t)},o.prototype.doWrite=function(t,e){var r=\"string\"!=typeof t&&void 0!==t,n=this.request({method:\"POST\",data:t,isBinary:r}),o=this;n.on(\"success\",e),n.on(\"error\",function(t){o.onError(\"xhr post error\",t)}),this.sendXhr=n},o.prototype.doPoll=function(){var t=this.request(),e=this;t.on(\"data\",function(t){e.onData(t)}),t.on(\"error\",function(t){e.onError(\"xhr poll error\",t)}),this.pollXhr=t},h(i.prototype),i.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var r=this.xhr=new a(t),n=this;try{r.open(this.method,this.uri,this.async);try{if(this.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(var o in this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this.extraHeaders[o])}}catch(t){}if(\"POST\"===this.method)try{this.isBinary?r.setRequestHeader(\"Content-type\",\"application/octet-stream\"):r.setRequestHeader(\"Content-type\",\"text/plain;charset=UTF-8\")}catch(t){}try{r.setRequestHeader(\"Accept\",\"*/*\")}catch(t){}\"withCredentials\"in r&&(r.withCredentials=!0),this.requestTimeout&&(r.timeout=this.requestTimeout),this.hasXDR()?(r.onload=function(){n.onLoad()},r.onerror=function(){n.onError(r.responseText)}):r.onreadystatechange=function(){if(2===r.readyState)try{var t=r.getResponseHeader(\"Content-Type\");n.supportsBinary&&\"application/octet-stream\"===t&&(r.responseType=\"arraybuffer\")}catch(t){}4===r.readyState&&(200===r.status||1223===r.status?n.onLoad():setTimeout(function(){n.onError(r.status)},0))},r.send(this.data)}catch(t){return void setTimeout(function(){n.onError(t)},0)}e.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit(\"success\"),this.cleanup()},i.prototype.onData=function(t){this.emit(\"data\",t),this.onSuccess()},i.prototype.onError=function(t){this.emit(\"error\",t),this.cleanup(!0)},i.prototype.cleanup=function(t){if(\"undefined\"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,t)try{this.xhr.abort()}catch(t){}e.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader(\"Content-Type\")}catch(t){}t=\"application/octet-stream\"===e?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},i.prototype.hasXDR=function(){return\"undefined\"!=typeof e.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},i.requestsCount=0,i.requests={},e.document&&(e.attachEvent?e.attachEvent(\"onunload\",s):e.addEventListener&&e.addEventListener(\"beforeunload\",s,!1))}).call(e,function(){return this}())},function(t,e,r){function n(t){var e=t&&t.forceBase64;h&&!e||(this.supportsBinary=!1),o.call(this,t)}var o=r(17),i=r(27),s=r(18),a=r(28),c=r(29);r(3)(\"engine.io-client:polling\");t.exports=n;var h=function(){var t=r(13),e=new t({xdomain:!1});return null!=e.responseType}();a(n,o),n.prototype.name=\"polling\",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(t){function e(){r.readyState=\"paused\",t()}var r=this;if(this.readyState=\"pausing\",this.polling||!this.writable){var n=0;this.polling&&(n++,this.once(\"pollComplete\",function(){--n||e()})),this.writable||(n++,this.once(\"drain\",function(){--n||e()}))}else e()},n.prototype.poll=function(){this.polling=!0,this.doPoll(),this.emit(\"poll\")},n.prototype.onData=function(t){var e=this,r=function(t,r,n){return\"opening\"===e.readyState&&e.onOpen(),\"close\"===t.type?(e.onClose(),!1):void e.onPacket(t)};s.decodePayload(t,this.socket.binaryType,r),\"closed\"!==this.readyState&&(this.polling=!1,this.emit(\"pollComplete\"),\"open\"===this.readyState&&this.poll())},n.prototype.doClose=function(){function t(){e.write([{type:\"close\"}])}var e=this;\"open\"===this.readyState?t():this.once(\"open\",t)},n.prototype.write=function(t){var e=this;this.writable=!1;var r=function(){e.writable=!0,e.emit(\"drain\")};s.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,r)})},n.prototype.uri=function(){var t=this.query||{},e=this.secure?\"https\":\"http\",r=\"\";!1!==this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&(\"https\"===e&&443!==Number(this.port)||\"http\"===e&&80!==Number(this.port))&&(r=\":\"+this.port),t.length&&(t=\"?\"+t);var n=this.hostname.indexOf(\":\")!==-1;return e+\"://\"+(n?\"[\"+this.hostname+\"]\":this.hostname)+r+this.path+t}},function(t,e,r){function n(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState=\"\",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}var o=r(18),i=r(5);t.exports=n,i(n.prototype),n.prototype.onError=function(t,e){var r=new Error(t);return r.type=\"TransportError\",r.description=e,this.emit(\"error\",r),this},n.prototype.open=function(){return\"closed\"!==this.readyState&&\"\"!==this.readyState||(this.readyState=\"opening\",this.doOpen()),this},n.prototype.close=function(){return\"opening\"!==this.readyState&&\"open\"!==this.readyState||(this.doClose(),this.onClose()),this},n.prototype.send=function(t){if(\"open\"!==this.readyState)throw new Error(\"Transport not open\");this.write(t)},n.prototype.onOpen=function(){this.readyState=\"open\",this.writable=!0,this.emit(\"open\")},n.prototype.onData=function(t){var e=o.decodePacket(t,this.socket.binaryType);this.onPacket(e)},n.prototype.onPacket=function(t){this.emit(\"packet\",t)},n.prototype.onClose=function(){this.readyState=\"closed\",this.emit(\"close\")}},function(t,e,r){(function(t){function n(t,r){var n=\"b\"+e.packets[t.type]+t.data.data;return r(n)}function o(t,r,n){if(!r)return e.encodeBase64Packet(t,n);\nvar o=t.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=v[t.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return n(s.buffer)}function i(t,r,n){if(!r)return e.encodeBase64Packet(t,n);var o=new FileReader;return o.onload=function(){t.data=o.result,e.encodePacket(t,r,!0,n)},o.readAsArrayBuffer(t.data)}function s(t,r,n){if(!r)return e.encodeBase64Packet(t,n);if(g)return i(t,r,n);var o=new Uint8Array(1);o[0]=v[t.type];var s=new w([o.buffer,t.data]);return n(s)}function a(t){try{t=d.decode(t,{strict:!1})}catch(t){return!1}return t}function c(t,e,r){for(var n=new Array(t.length),o=l(t.length,r),i=function(t,r,o){e(r,function(e,r){n[t]=r,o(e,n)})},s=0;s<t.length;s++)i(s,t[s],o)}var h,p=r(19),u=r(20),f=r(21),l=r(22),d=r(23);t&&t.ArrayBuffer&&(h=r(25));var y=\"undefined\"!=typeof navigator&&/Android/i.test(navigator.userAgent),m=\"undefined\"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),g=y||m;e.protocol=3;var v=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=p(v),k={type:\"error\",data:\"parser error\"},w=r(26);e.encodePacket=function(e,r,i,a){\"function\"==typeof r&&(a=r,r=!1),\"function\"==typeof i&&(a=i,i=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return o(e,r,a);if(w&&c instanceof t.Blob)return s(e,r,a);if(c&&c.base64)return n(e,a);var h=v[e.type];return void 0!==e.data&&(h+=i?d.encode(String(e.data),{strict:!1}):String(e.data)),a(\"\"+h)},e.encodeBase64Packet=function(r,n){var o=\"b\"+e.packets[r.type];if(w&&r.data instanceof t.Blob){var i=new FileReader;return i.onload=function(){var t=i.result.split(\",\")[1];n(o+t)},i.readAsDataURL(r.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(r.data))}catch(t){for(var a=new Uint8Array(r.data),c=new Array(a.length),h=0;h<a.length;h++)c[h]=a[h];s=String.fromCharCode.apply(null,c)}return o+=t.btoa(s),n(o)},e.decodePacket=function(t,r,n){if(void 0===t)return k;if(\"string\"==typeof t){if(\"b\"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),r);if(n&&(t=a(t),t===!1))return k;var o=t.charAt(0);return Number(o)==o&&b[o]?t.length>1?{type:b[o],data:t.substring(1)}:{type:b[o]}:k}var i=new Uint8Array(t),o=i[0],s=f(t,1);return w&&\"blob\"===r&&(s=new w([s])),{type:b[o],data:s}},e.decodeBase64Packet=function(t,e){var r=b[t.charAt(0)];if(!h)return{type:r,data:{base64:!0,data:t.substr(1)}};var n=h.decode(t.substr(1));return\"blob\"===e&&w&&(n=new w([n])),{type:r,data:n}},e.encodePayload=function(t,r,n){function o(t){return t.length+\":\"+t}function i(t,n){e.encodePacket(t,!!s&&r,!1,function(t){n(null,o(t))})}\"function\"==typeof r&&(n=r,r=null);var s=u(t);return r&&s?w&&!g?e.encodePayloadAsBlob(t,n):e.encodePayloadAsArrayBuffer(t,n):t.length?void c(t,i,function(t,e){return n(e.join(\"\"))}):n(\"0:\")},e.decodePayload=function(t,r,n){if(\"string\"!=typeof t)return e.decodePayloadAsBinary(t,r,n);\"function\"==typeof r&&(n=r,r=null);var o;if(\"\"===t)return n(k,0,1);for(var i,s,a=\"\",c=0,h=t.length;c<h;c++){var p=t.charAt(c);if(\":\"===p){if(\"\"===a||a!=(i=Number(a)))return n(k,0,1);if(s=t.substr(c+1,i),a!=s.length)return n(k,0,1);if(s.length){if(o=e.decodePacket(s,r,!1),k.type===o.type&&k.data===o.data)return n(k,0,1);var u=n(o,c+i,h);if(!1===u)return}c+=i,a=\"\"}else a+=p}return\"\"!==a?n(k,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,r){function n(t,r){e.encodePacket(t,!0,!0,function(t){return r(null,t)})}return t.length?void c(t,n,function(t,e){var n=e.reduce(function(t,e){var r;return r=\"string\"==typeof e?e.length:e.byteLength,t+r.toString().length+r+2},0),o=new Uint8Array(n),i=0;return e.forEach(function(t){var e=\"string\"==typeof t,r=t;if(e){for(var n=new Uint8Array(t.length),s=0;s<t.length;s++)n[s]=t.charCodeAt(s);r=n.buffer}e?o[i++]=0:o[i++]=1;for(var a=r.byteLength.toString(),s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(var n=new Uint8Array(r),s=0;s<n.length;s++)o[i++]=n[s]}),r(o.buffer)}):r(new ArrayBuffer(0))},e.encodePayloadAsBlob=function(t,r){function n(t,r){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,\"string\"==typeof t){for(var n=new Uint8Array(t.length),o=0;o<t.length;o++)n[o]=t.charCodeAt(o);t=n.buffer,e[0]=0}for(var i=t instanceof ArrayBuffer?t.byteLength:t.size,s=i.toString(),a=new Uint8Array(s.length+1),o=0;o<s.length;o++)a[o]=parseInt(s[o]);if(a[s.length]=255,w){var c=new w([e.buffer,a.buffer,t]);r(null,c)}})}c(t,n,function(t,e){return r(new w(e))})},e.decodePayloadAsBinary=function(t,r,n){\"function\"==typeof r&&(n=r,r=null);for(var o=t,i=[];o.byteLength>0;){for(var s=new Uint8Array(o),a=0===s[0],c=\"\",h=1;255!==s[h];h++){if(c.length>310)return n(k,0,1);c+=s[h]}o=f(o,2+c.length),c=parseInt(c);var p=f(o,0,c);if(a)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(t){var u=new Uint8Array(p);p=\"\";for(var h=0;h<u.length;h++)p+=String.fromCharCode(u[h])}i.push(p),o=f(o,c)}var l=i.length;i.forEach(function(t,o){n(e.decodePacket(t,r,!0),o,l)})}}).call(e,function(){return this}())},function(t,e){t.exports=Object.keys||function(t){var e=[],r=Object.prototype.hasOwnProperty;for(var n in t)r.call(t,n)&&e.push(n);return e}},function(t,e,r){(function(e){function n(t){if(!t||\"object\"!=typeof t)return!1;if(o(t)){for(var r=0,i=t.length;r<i;r++)if(n(t[r]))return!0;return!1}if(\"function\"==typeof e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(t)||\"function\"==typeof e.ArrayBuffer&&t instanceof ArrayBuffer||s&&t instanceof Blob||a&&t instanceof File)return!0;if(t.toJSON&&\"function\"==typeof t.toJSON&&1===arguments.length)return n(t.toJSON(),!0);for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)&&n(t[c]))return!0;return!1}var o=r(7),i=Object.prototype.toString,s=\"function\"==typeof e.Blob||\"[object BlobConstructor]\"===i.call(e.Blob),a=\"function\"==typeof e.File||\"[object FileConstructor]\"===i.call(e.File);t.exports=n}).call(e,function(){return this}())},function(t,e){t.exports=function(t,e,r){var n=t.byteLength;if(e=e||0,r=r||n,t.slice)return t.slice(e,r);if(e<0&&(e+=n),r<0&&(r+=n),r>n&&(r=n),e>=n||e>=r||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(t),i=new Uint8Array(r-e),s=e,a=0;s<r;s++,a++)i[a]=o[s];return i.buffer}},function(t,e){function r(t,e,r){function o(t,n){if(o.count<=0)throw new Error(\"after called too many times\");--o.count,t?(i=!0,e(t),e=r):0!==o.count||i||e(null,n)}var i=!1;return r=r||n,o.count=t,0===t?e():o}function n(){}t.exports=r},function(t,e,r){var n;(function(t,o){!function(i){function s(t){for(var e,r,n=[],o=0,i=t.length;o<i;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<i?(r=t.charCodeAt(o++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--)):n.push(e);return n}function a(t){for(var e,r=t.length,n=-1,o=\"\";++n<r;)e=t[n],e>65535&&(e-=65536,o+=k(e>>>10&1023|55296),e=56320|1023&e),o+=k(e);return o}function c(t,e){if(t>=55296&&t<=57343){if(e)throw Error(\"Lone surrogate U+\"+t.toString(16).toUpperCase()+\" is not a scalar value\");return!1}return!0}function h(t,e){return k(t>>e&63|128)}function p(t,e){if(0==(4294967168&t))return k(t);var r=\"\";return 0==(4294965248&t)?r=k(t>>6&31|192):0==(4294901760&t)?(c(t,e)||(t=65533),r=k(t>>12&15|224),r+=h(t,6)):0==(4292870144&t)&&(r=k(t>>18&7|240),r+=h(t,12),r+=h(t,6)),r+=k(63&t|128)}function u(t,e){e=e||{};for(var r,n=!1!==e.strict,o=s(t),i=o.length,a=-1,c=\"\";++a<i;)r=o[a],c+=p(r,n);return c}function f(){if(b>=v)throw Error(\"Invalid byte index\");var t=255&g[b];if(b++,128==(192&t))return 63&t;throw Error(\"Invalid continuation byte\")}function l(t){var e,r,n,o,i;if(b>v)throw Error(\"Invalid byte index\");if(b==v)return!1;if(e=255&g[b],b++,0==(128&e))return e;if(192==(224&e)){if(r=f(),i=(31&e)<<6|r,i>=128)return i;throw Error(\"Invalid continuation byte\")}if(224==(240&e)){if(r=f(),n=f(),i=(15&e)<<12|r<<6|n,i>=2048)return c(i,t)?i:65533;throw Error(\"Invalid continuation byte\")}if(240==(248&e)&&(r=f(),n=f(),o=f(),i=(7&e)<<18|r<<12|n<<6|o,i>=65536&&i<=1114111))return i;throw Error(\"Invalid UTF-8 detected\")}function d(t,e){e=e||{};var r=!1!==e.strict;g=s(t),v=g.length,b=0;for(var n,o=[];(n=l(r))!==!1;)o.push(n);return a(o)}var y=\"object\"==typeof e&&e,m=(\"object\"==typeof t&&t&&t.exports==y&&t,\"object\"==typeof o&&o);m.global!==m&&m.window!==m||(i=m);var g,v,b,k=String.fromCharCode,w={version:\"2.1.2\",encode:u,decode:d};n=function(){return w}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}(this)}).call(e,r(24)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){!function(){\"use strict\";for(var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",r=new Uint8Array(256),n=0;n<t.length;n++)r[t.charCodeAt(n)]=n;e.encode=function(e){var r,n=new Uint8Array(e),o=n.length,i=\"\";for(r=0;r<o;r+=3)i+=t[n[r]>>2],i+=t[(3&n[r])<<4|n[r+1]>>4],i+=t[(15&n[r+1])<<2|n[r+2]>>6],i+=t[63&n[r+2]];return o%3===2?i=i.substring(0,i.length-1)+\"=\":o%3===1&&(i=i.substring(0,i.length-2)+\"==\"),i},e.decode=function(t){var e,n,o,i,s,a=.75*t.length,c=t.length,h=0;\"=\"===t[t.length-1]&&(a--,\"=\"===t[t.length-2]&&a--);var p=new ArrayBuffer(a),u=new Uint8Array(p);for(e=0;e<c;e+=4)n=r[t.charCodeAt(e)],o=r[t.charCodeAt(e+1)],i=r[t.charCodeAt(e+2)],s=r[t.charCodeAt(e+3)],u[h++]=n<<2|o>>4,u[h++]=(15&o)<<4|i>>2,u[h++]=(3&i)<<6|63&s;return p}}()},function(t,e){(function(e){function r(t){for(var e=0;e<t.length;e++){var r=t[e];if(r.buffer instanceof ArrayBuffer){var n=r.buffer;if(r.byteLength!==n.byteLength){var o=new Uint8Array(r.byteLength);o.set(new Uint8Array(n,r.byteOffset,r.byteLength)),n=o.buffer}t[e]=n}}}function n(t,e){e=e||{};var n=new i;r(t);for(var o=0;o<t.length;o++)n.append(t[o]);return e.type?n.getBlob(e.type):n.getBlob()}function o(t,e){return r(t),new Blob(t,e||{})}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{var t=new Blob([\"hi\"]);return 2===t.size}catch(t){return!1}}(),a=s&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return 2===t.size}catch(t){return!1}}(),c=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return s?a?e.Blob:o:c?n:void 0}()}).call(e,function(){return this}())},function(t,e){e.encode=function(t){var e=\"\";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+=\"&\"),e+=encodeURIComponent(r)+\"=\"+encodeURIComponent(t[r]));return e},e.decode=function(t){for(var e={},r=t.split(\"&\"),n=0,o=r.length;n<o;n++){var i=r[n].split(\"=\");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},function(t,e){t.exports=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e){\"use strict\";function r(t){var e=\"\";do e=s[t%a]+e,t=Math.floor(t/a);while(t>0);return e}function n(t){var e=0;for(p=0;p<t.length;p++)e=e*a+c[t.charAt(p)];return e}function o(){var t=r(+new Date);return t!==i?(h=0,i=t):t+\".\"+r(h++)}for(var i,s=\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_\".split(\"\"),a=64,c={},h=0,p=0;p<a;p++)c[s[p]]=p;o.encode=r,o.decode=n,t.exports=o},function(t,e,r){(function(e){function n(){}function o(t){i.call(this,t),this.query=this.query||{},a||(e.___eio||(e.___eio=[]),a=e.___eio),this.index=a.length;var r=this;a.push(function(t){r.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener(\"beforeunload\",function(){r.script&&(r.script.onerror=n)},!1)}var i=r(16),s=r(28);t.exports=o;var a,c=/\\n/g,h=/\\\\n/g;s(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var t=this,e=document.createElement(\"script\");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError(\"jsonp poll error\",e)};var r=document.getElementsByTagName(\"script\")[0];r?r.parentNode.insertBefore(e,r):(document.head||document.body).appendChild(e),this.script=e;var n=\"undefined\"!=typeof navigator&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var t=document.createElement(\"iframe\");document.body.appendChild(t),document.body.removeChild(t)},100)},o.prototype.doWrite=function(t,e){function r(){n(),e()}function n(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(t){o.onError(\"jsonp polling iframe removal error\",t)}try{var t='<iframe src=\"javascript:0\" name=\"'+o.iframeId+'\">';i=document.createElement(t)}catch(t){i=document.createElement(\"iframe\"),i.name=o.iframeId,i.src=\"javascript:0\"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,s=document.createElement(\"form\"),a=document.createElement(\"textarea\"),p=this.iframeId=\"eio_iframe_\"+this.index;s.className=\"socketio\",s.style.position=\"absolute\",s.style.top=\"-1000px\",s.style.left=\"-1000px\",s.target=p,s.method=\"POST\",s.setAttribute(\"accept-charset\",\"utf-8\"),a.name=\"d\",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),n(),t=t.replace(h,\"\\\\\\n\"),this.area.value=t.replace(c,\"\\\\n\");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){\"complete\"===o.iframe.readyState&&r()}:this.iframe.onload=r}}).call(e,function(){return this}())},function(t,e,r){(function(e){function n(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=p&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(u=o),i.call(this,t)}var o,i=r(17),s=r(18),a=r(27),c=r(28),h=r(29),p=(r(3)(\"engine.io-client:websocket\"),e.WebSocket||e.MozWebSocket);if(\"undefined\"==typeof window)try{o=r(32)}catch(t){}var u=p;u||\"undefined\"!=typeof window||(u=o),t.exports=n,c(n,i),n.prototype.name=\"websocket\",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?e?new u(t,e):new u(t):new u(t,e,r)}catch(t){return this.emit(\"error\",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType=\"nodebuffer\"):this.ws.binaryType=\"arraybuffer\",this.addEventListeners()}},n.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError(\"websocket error\",e)}},n.prototype.write=function(t){function r(){n.emit(\"flush\"),setTimeout(function(){n.writable=!0,n.emit(\"drain\")},0)}var n=this;this.writable=!1;for(var o=t.length,i=0,a=o;i<a;i++)!function(t){s.encodePacket(t,n.supportsBinary,function(i){if(!n.usingBrowserWebSocket){var s={};if(t.options&&(s.compress=t.options.compress),n.perMessageDeflate){var a=\"string\"==typeof i?e.Buffer.byteLength(i):i.length;a<n.perMessageDeflate.threshold&&(s.compress=!1)}}try{n.usingBrowserWebSocket?n.ws.send(i):n.ws.send(i,s)}catch(t){}--o||r()})}(t[i])},n.prototype.onClose=function(){i.prototype.onClose.call(this)},n.prototype.doClose=function(){\"undefined\"!=typeof this.ws&&this.ws.close()},n.prototype.uri=function(){var t=this.query||{},e=this.secure?\"wss\":\"ws\",r=\"\";this.port&&(\"wss\"===e&&443!==Number(this.port)||\"ws\"===e&&80!==Number(this.port))&&(r=\":\"+this.port),this.timestampRequests&&(t[this.timestampParam]=h()),this.supportsBinary||(t.b64=1),t=a.encode(t),t.length&&(t=\"?\"+t);var n=this.hostname.indexOf(\":\")!==-1;return e+\"://\"+(n?\"[\"+this.hostname+\"]\":this.hostname)+r+this.path+t},n.prototype.check=function(){return!(!u||\"__initialize\"in u&&this.name===n.prototype.name)}}).call(e,function(){return this}())},function(t,e){},function(t,e){var r=[].indexOf;t.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},function(t,e,r){\"use strict\";function n(t,e,r){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}var o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},i=r(4),s=r(5),a=r(35),c=r(36),h=r(37),p=(r(3)(\"socket.io-client:socket\"),r(27)),u=r(20);t.exports=e=n;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},l=s.prototype.emit;s(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[c(t,\"open\",h(this,\"onopen\")),c(t,\"packet\",h(this,\"onpacket\")),c(t,\"close\",h(this,\"onclose\"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),\"open\"===this.io.readyState&&this.onopen(),this.emit(\"connecting\"),this)},n.prototype.send=function(){var t=a(arguments);return t.unshift(\"message\"),this.emit.apply(this,t),this},n.prototype.emit=function(t){if(f.hasOwnProperty(t))return l.apply(this,arguments),this;var e=a(arguments),r={type:(void 0!==this.flags.binary?this.flags.binary:u(e))?i.BINARY_EVENT:i.EVENT,data:e};return r.options={},r.options.compress=!this.flags||!1!==this.flags.compress,\"function\"==typeof e[e.length-1]&&(this.acks[this.ids]=e.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),this.flags={},this},n.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},n.prototype.onopen=function(){if(\"/\"!==this.nsp)if(this.query){var t=\"object\"===o(this.query)?p.encode(this.query):this.query;this.packet({type:i.CONNECT,query:t})}else this.packet({type:i.CONNECT})},n.prototype.onclose=function(t){this.connected=!1,this.disconnected=!0,delete this.id,this.emit(\"disconnect\",t)},n.prototype.onpacket=function(t){var e=t.nsp===this.nsp,r=t.type===i.ERROR&&\"/\"===t.nsp;if(e||r)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(t);break;case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:this.onack(t);break;case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit(\"error\",t.data)}},n.prototype.onevent=function(t){var e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?l.apply(this,e):this.receiveBuffer.push(e)},n.prototype.ack=function(t){var e=this,r=!1;return function(){if(!r){r=!0;var n=a(arguments);e.packet({type:u(n)?i.BINARY_ACK:i.ACK,id:t,data:n})}}},n.prototype.onack=function(t){var e=this.acks[t.id];\"function\"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit(\"connect\"),this.emitBuffered()},n.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)l.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){this.destroy(),this.onclose(\"io server disconnect\")},n.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&this.packet({type:i.DISCONNECT}),this.destroy(),this.connected&&this.onclose(\"io client disconnect\"),this},n.prototype.compress=function(t){return this.flags.compress=t,this},n.prototype.binary=function(t){return this.flags.binary=t,this}},function(t,e){function r(t,e){var r=[];e=e||0;for(var n=e||0;n<t.length;n++)r[n-e]=t[n];return r}t.exports=r},function(t,e){\"use strict\";function r(t,e,r){return t.on(e,r),{destroy:function(){t.removeListener(e,r)}}}t.exports=r},function(t,e){var r=[].slice;t.exports=function(t,e){if(\"string\"==typeof e&&(e=t[e]),\"function\"!=typeof e)throw new Error(\"bind() requires a function\");var n=r.call(arguments,2);return function(){return e.apply(t,n.concat(r.call(arguments)))}}},function(t,e){function r(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=r,r.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-r:t+r}return 0|Math.min(t,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(t){this.ms=t},r.prototype.setMax=function(t){this.max=t},r.prototype.setJitter=function(t){this.jitter=t}}])});\n//# sourceMappingURL=socket.io.slim.js.map","import {location} from \"@hyperapp/router\"\r\nimport deepmerge from \"deepmerge\"\r\nimport {ObjectID, dontMerge, storeStateInStorage} from '../utils/'\r\nimport io from 'socket.io-client/dist/socket.io.slim'\r\n\r\nexport const actions = {\r\n  location: location.actions,\r\n  update: fragment => state => deepmerge(state, fragment, {arrayMerge: dontMerge}),\r\n  set: fragment => fragment,\r\n  init: () => (state, actions) => {\r\n\r\n    // Activate our router\r\n    window.unsubscribe = location.subscribe(main.location);\r\n\r\n    // Websocket connect\r\n    window.socket = io.connect(window.location.hostname);\r\n\r\n    // // Subscribe to socket events\r\n    window.socket.on('update state', newState => main.update(newState));\r\n\r\n    // Login on load (sets a username on our socket connection)\r\n    if (state.user) {\r\n      socket.emit('login', {\r\n        username: state.user.username\r\n      });\r\n    }\r\n\r\n  },\r\n\r\n  openLoginForm: () => (state, actions) => {\r\n    actions.update({loginForm: {opened: true}});\r\n  }\r\n  \r\n}\r\n","import {h} from 'hyperapp'\r\nimport { Link } from \"@hyperapp/router\"\r\n\r\n\r\nimport './main-menu.css'\r\n\r\nexport const MainMenu = () => (state, actions) => state.user ? <UserMenu user={state.user} /> : <GuestMenu />\r\n\r\n\r\nconst UserMenu = ({user}) => (state, actions) => (\r\n  <div class=\"main-menu\">\r\n    <div class=\"heading\">\r\n      {user.username}\r\n    </div>\r\n    <nav class=\"menu\">\r\n      <Link class=\"bubble-link\" to=\"/\">Home</Link>\r\n      {\r\n        Object.keys(state.bubbles)\r\n        .map(bubbleName => <BubbleLink bubble={state.bubbles[bubbleName]} />)\r\n      }\r\n      <button class=\"bubble-link\" onclick={actions.openBubbleForm}>Create bubble</button>\r\n    </nav>\r\n  </div>\r\n)\r\n\r\n\r\nconst GuestMenu = () => (state, actions) => (\r\n  <div class=\"main-menu\">\r\n    <div class=\"heading\">\r\n      Bubbleio\r\n    </div>\r\n    <nav class=\"menu\">\r\n    \r\n      <Link class=\"bubble-link\" to=\"/\">Home</Link>\r\n      {\r\n        Object.keys(state.bubbles)\r\n        .map(bubbleName => <BubbleLink bubble={state.bubbles[bubbleName]} />)\r\n      }\r\n      <button class=\"bubble-link\" onclick={actions.openLoginForm}>Login</button>\r\n      \r\n    </nav>\r\n  </div>\r\n)\r\n\r\n\r\n\r\n\r\n\r\nconst BubbleLink = ({bubble}) => (\r\n  <Link class=\"bubble-link\" to={`/${bubble.name}`}>\r\n    {bubble.title} - {bubble.userCount || 0}\r\n  </Link>\r\n)\r\n\r\n\r\n","import {h} from 'hyperapp'\r\n\r\nimport './spinner.css'\r\n\r\nexport const Spinner = () => (\r\n  <div class=\"spinner\" key=\"spinner\"></div>\r\n)\r\n\r\n// import {Spinner} from './Spinner/Spinner.js'\r\n// <Spinner />\r\n","import {h} from 'hyperapp'\r\n\r\nexport const Up = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-arrow-up\"><line x1=\"12\" y1=\"19\" x2=\"12\" y2=\"5\"></line><polyline points=\"5 12 12 5 19 12\"></polyline></svg>\r\n","import {h} from 'hyperapp'\r\n\r\nexport const Down = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-arrow-down\"><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line><polyline points=\"19 12 12 19 5 12\"></polyline></svg>\r\n","import { h } from \"hyperapp\"\r\n\r\nimport \"./thread-footer.css\"\r\n\r\nimport {Up} from '../../icons/Up.js'\r\nimport {Down} from '../../icons/Down.js'\r\n\r\nconst upvote = thread => (state, actions) => {\r\n  if (state.user) {\r\n    if ((thread.voted || 0) <= 5) {\r\n      socket.emit('vote', {\r\n        threadId: thread._id,\r\n        quantity: 1\r\n      })\r\n    }\r\n  } else {\r\n    actions.openLoginForm()\r\n  }\r\n}\r\n\r\nconst downvote = thread => (state, actions) => {\r\n  if (state.user) {\r\n    if ((thread.voted || 0) >= -5) {\r\n      socket.emit('vote', {\r\n        threadId: thread._id,\r\n        quantity: -1\r\n      })\r\n    }\r\n  } else {\r\n    actions.openLoginForm()\r\n  }\r\n}\r\n\r\n\r\nexport const ThreadFooter = ({thread}) => (state, actions) => (\r\n  <div class=\"thread-footer\" key=\"thread-footer\">\r\n    <div class=\"info\">\r\n      <span>{thread.score} points</span>\r\n      <span>{thread.userCount || 0} users</span>\r\n      <span>{thread.messageCount || 0} messages</span>\r\n    </div>\r\n    <div class=\"actions\">\r\n      <button class=\"upvote\" onclick={ev => upvote(thread)(state, actions)}><Up /></button>\r\n      <button class=\"downvote\" onclick={ev => downvote(thread)(state, actions)}><Down /></button>\r\n    </div>\r\n  </div>\r\n)\r\n","\r\nimport {h} from 'hyperapp'\r\n\r\nimport { Link, Route } from \"@hyperapp/router\"\r\n\r\nimport {ThreadFooter} from '../ThreadFooter/ThreadFooter.js'\r\n\r\nimport {timeSince} from '../../../utils/'\r\n\r\nimport './thread-item.css'\r\n\r\nexport const ThreadItem = ({thread, bubble}) => (\r\n  <div class=\"thread-item\" key={thread._id}>\r\n    <Link to={`/${bubble.name}/${thread._id}`}>{thread.title}</Link>\r\n    <h6>{thread.author} - {timeSince(thread.createdAt)}</h6>\r\n    <ThreadFooter thread={thread} />\r\n  </div>\r\n)","import {h} from 'hyperapp'\r\n\r\nimport './modal.css'\r\n\r\n// Trigger css slidein transition\r\nconst slideIn = el => {\r\n  el.classList.add('closed')\r\n  void el.clientHeight\r\n  el.classList.remove('closed')\r\n}\r\n\r\n// Trigger css slideout transition\r\nconst slideOut = (el, done) => {\r\n  el.classList.add('closed')\r\n  setTimeout(done, 300)\r\n}\r\n\r\n// Close Button\r\nconst Close = ({close}) => (\r\n  <div onclick={close} class=\"close\">\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line></svg>\r\n  </div>\r\n)\r\n\r\n// Exported component\r\nexport const Modal = ({close} = props, children) => (state, actions) => (\r\n  <div class=\"modal\" key=\"modal\" onclick={close} oncreate={slideIn} onremove={slideOut}>\r\n    <div class=\"box\" onclick={ev => ev.stopPropagation()}>\r\n      <Close close={close} />\r\n      <div class=\"inner\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  </div>\r\n)\r\n\r\n\r\n// Import:\r\n// import {Modal} from './Modal/Modal.js'\r\n\r\n// JSX:\r\n// {\r\n//   state.exampleModalIsOpened\r\n//     ? (\r\n//       <Modal close={ev => actions.set({'exampleModalIsOpened': false})}>\r\n//         <p>Modal content</p>\r\n//       </Modal>\r\n//     )\r\n//     : null\r\n// }\r\n","\r\nimport {h} from 'hyperapp'\r\n\r\nimport {Modal} from '../../common/Modal/Modal.js'\r\n\r\n\r\nimport './new-thread-form.css'\r\n\r\n\r\nconst set = fragment => main.update({\r\n  newThreadForm: fragment\r\n});\r\n\r\nconst handleNewThreadForm = (ev, bubble) => (state, actions, {title, type = type || 'default'} = state.newThreadForm) => {\r\n  ev.preventDefault();\r\n  if (state.user) {\r\n    socket.emit('new thread', {\r\n      title,\r\n      score: 0,\r\n      type,\r\n      trashed: false,\r\n      userId: state.user._id,\r\n      bubbleId: bubble._id\r\n    });\r\n    actions.set({newThreadForm: {}})\r\n  } else {\r\n    actions.openLoginForm()\r\n  }\r\n}\r\n\r\nexport const NewThreadForm = ({bubble}) => (\r\n  state,\r\n  actions,\r\n  {title, type, opened} = state.newThreadForm || {}\r\n) => (\r\n  <Modal close={() => set({opened: false})}>\r\n    <form class=\"new-thread-form\" key=\"new-thread-form\" method=\"post\" onsubmit={ev => handleNewThreadForm(ev, bubble)(state, actions)}>\r\n      <input type=\"text\" name=\"title\" id=\"title\" placeholder=\"Type something...\" value={title} oninput={ev => set({title: ev.target.value})} required />\r\n      <button type=\"submit\">Send</button>\r\n    </form>\r\n  </Modal>\r\n)","\nimport {h} from 'hyperapp'\n\n\nimport {Spinner} from '../../common/Spinner/Spinner.js'\n\n\nimport {ThreadItem} from '../ThreadItem/ThreadItem.js'\nimport {NewThreadForm} from '../NewThreadForm/NewThreadForm.js'\n\nimport './bubble-view.css'\n\n\nexport const BubbleView = () => (\n  state,\n  actions,\n  prevBubbleName = state.prevBubbleName,\n  nextBubbleName = window.location.pathname.split('/')[1],\n  bubble = state.bubbles && state.bubbles[prevBubbleName] ? state.bubbles[prevBubbleName] : null\n) => {\n\n  \n  \n  // Handle room socket navigation\n  if (nextBubbleName && nextBubbleName != prevBubbleName) {\n    // Join room here\n    socket.emit('switch bubble', {\n      prevBubbleName: prevBubbleName,\n      nextBubbleName: nextBubbleName\n    });\n  }\n\n\n\n\n  return (\n    <div class=\"bubble-view\">\n      {\n        bubble\n          ? bubble._id\n            ? <Bubble bubble={bubble} />\n            : <h2>Bubble not found</h2>\n          : <Spinner />\n      }\n    </div>\n  )\n}\n\n\n\n\n\n// Calculates relevance for a thread\n//\n// Score = (S + M/2) / T^G\n//\n// where,\n// S = points of a thread\n// M = total messages in a thread\n// T = time since submission (in hours)\n// G = Gravity, defaults to 1.8\nconst calculateRelevance = (thread) => (thread.score + ((thread.messageCount/2) || 0) + 1) / Math.pow(((new Date() - new Date(thread.createdAt)) / 3600000), 1.8)\n\n// Compares relevance between two threads\nconst compareRelevance = (threads) => (a, b) => calculateRelevance(threads[a]) < calculateRelevance(threads[b])\n\n\n\nconst Bubble = ({bubble}) => (state, actions) => (\n  <div class=\"bubble\" key={bubble._id}>\n\n    <div class=\"heading\">\n      <h1>{bubble.title}</h1>\n    </div>\n\n    <div class=\"listing\">\n      {\n        Object.keys(state.threads) // Go through all threads\n        .filter(threadId => state.threads[threadId].bubbleId == bubble._id) // Only the ones from this bubble\n        .sort(compareRelevance(state.threads)) // Sort thread by relevance\n        .map(threadId => <ThreadItem thread={state.threads[threadId]} bubble={bubble} />) // Map to the component\n      }\n    </div>\n    \n    {state.newThreadForm && state.newThreadForm.opened ? <NewThreadForm bubble={bubble} /> : null}\n\n    <button onclick={ev => actions.update({newThreadForm: {opened: true}})}>+</button>\n\n  </div>\n)\n\n\n\n","\nimport {h} from 'hyperapp'\n\nimport './message.css'\n\nexport const Message = ({message}) => (\n  <div class=\"message\" key={message._id}>\n    <b>{message.userId.username}</b>\n    <p>{message.text}</p>\n  </div>\n)","\r\nimport {h} from 'hyperapp'\r\n\r\nimport './message-form.css'\r\n\r\nconst set = fragment => main.update({messageForm: fragment});\r\n\r\nconst handleSubmit = (ev, thread) => (state, actions) => {\r\n  ev.preventDefault();\r\n  if (state.user) {\r\n    socket.emit('new message', {\r\n      userId: state.user._id,\r\n      threadId: thread._id,\r\n      text: ev.target.text.value\r\n    })\r\n    actions.set({messageForm: {}})\r\n  } else {\r\n    actions.openLoginForm()\r\n  }\r\n}\r\n\r\nexport const MessageForm = ({thread}) => (state, actions, {text} = state.messageForm || {}) => (\r\n  <form class=\"message-form\" action=\"/\" method=\"post\" onsubmit={ev => handleSubmit(ev, thread)(state, actions)}>\r\n    <input type=\"text\" name=\"text\" id=\"text\" placeholder=\"Type something...\" value={text} oninput={ev => set({text: ev.target.value})} />\r\n    <button type=\"submit\">Send</button>\r\n  </form>\r\n)","import {h} from 'hyperapp'\r\n\r\n\r\nimport {Spinner} from '../../common/Spinner/Spinner.js'\r\n\r\nimport {Message} from '../Message/Message.js'\r\n\r\nimport {ThreadFooter} from '../ThreadFooter/ThreadFooter.js'\r\nimport {MessageForm} from '../MessageForm/MessageForm.js'\r\n\r\n\r\n\r\n\r\n\r\nimport './thread-panel.css'\r\n\r\n\r\n\r\nexport const ThreadPanel = () => (\r\n  state,\r\n  actions,\r\n  prevThreadId = state.prevThreadId,\r\n  nextThreadId = window.location.pathname.split('/')[2],\r\n  thread = state.threads && state.threads[prevThreadId] ? state.threads[prevThreadId] : null\r\n) => {\r\n\r\n  \r\n  \r\n  // Handle room socket navigation\r\n  if (nextThreadId && nextThreadId != prevThreadId) {\r\n    // Join room here\r\n    socket.emit('switch thread', {\r\n      prevThreadId: prevThreadId,\r\n      nextThreadId: nextThreadId\r\n    });\r\n  }\r\n\r\n\r\n  return (\r\n    <div class=\"thread-panel\">\r\n      {\r\n        thread\r\n          ? thread._id\r\n            ? <Thread thread={thread} />\r\n            : <h2>Thread not found</h2>\r\n          : <Spinner />\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst compareAge = (messages) => (a, b) => messages[a].createdAt > messages[b].createdAt\r\n\r\n\r\nconst Thread = ({thread}) => (state, actions) => (\r\n  <div class=\"thread\" key={thread._id}>\r\n    <div class=\"preview\">\r\n      <div class=\"heading\">\r\n        <h2>{thread.title}</h2>\r\n      </div>\r\n      <ThreadFooter thread={thread} />\r\n    </div>\r\n    \r\n    <div class=\"messages\">\r\n      {\r\n        Object.keys(state.messages)\r\n        .filter(messageId => state.messages[messageId].threadId == thread._id)\r\n        .sort(compareAge(state.messages))\r\n        .map(messageId => <Message message={state.messages[messageId]} />)\r\n      }\r\n    </div>\r\n    \r\n    <MessageForm thread={thread} />\r\n\r\n  </div>\r\n)\r\n\r\n\r\n\r\n","export default function cc(classes) {\n  var out = \"\"\n  var type = typeof classes\n\n  if (type === \"string\" || type === \"number\") {\n    return classes || \"\"\n  }\n\n  if (Array.isArray(classes) && classes.length > 0) {\n    for (var i = 0, len = classes.length; i < len; i++) {\n      var next = cc(classes[i])\n      if (next) {\n        out += (out && \" \") + next\n      }\n    }\n  } else {\n    for (var key in classes) {\n      if (classes.hasOwnProperty(key) && classes[key]) {\n        out += (out && \" \") + key\n      }\n    }\n  }\n\n  return out\n}\n","import {h} from 'hyperapp'\r\nimport cc from 'classcat'\r\n\r\nimport './nice-input.css'\r\n\r\nexport const NiceInput = (props, children, {label = label || 'Label', name = name || 'name', type = type || 'text', placeholder = placeholder || ' ', setter} = props) => (\r\n  <div class={cc(['nice-input', name])} key={name}>\r\n    <input type={type} name={name} id={name} placeholder={placeholder} oninput={ev => setter({[name]: ev.target.value})} {...props} setter={null} />\r\n    <label for={name}>{label}</label>\r\n  </div>\r\n)\r\n\r\n// import {NiceInput} from './NiceInput/NiceInput.js'\r\n// <NiceInput label=\"First name\" name=\"first_name\" setter={set} />\r\n","\r\nimport {h} from 'hyperapp'\r\nimport cc from 'classcat'\r\n\r\nimport {NiceInput} from '../../common/NiceInput/NiceInput.js'\r\nimport {Modal} from '../../common/Modal/Modal.js'\r\n\r\nimport './login-form.css'\r\n\r\nconst set = fragment => main.update({loginForm: fragment});\r\n\r\n\r\nconst handleSubmit = (ev) => (state, actions, {username, password, mode} = state.loginForm) => {\r\n  ev.preventDefault();\r\n\r\n  socket.emit('login', {username, password, mode})\r\n  actions.set({loginForm: {}})\r\n}\r\n\r\nexport const LoginForm = ({username, password, mode = mode || 'login', opened}) => (state, actions) => (\r\n  <Modal close={() => set({opened: false})}>\r\n    <form class=\"login-form\" key=\"login-form\" method=\"post\" onsubmit={ev => handleSubmit(ev)(state, actions)}>\r\n      <h2>Login</h2>\r\n      <NiceInput label=\"Username\" name=\"username\" value={username} required setter={set} />\r\n      <NiceInput label=\"Password\" name=\"password\" value={password} required setter={set} />\r\n      <button type=\"submit\">Login</button>\r\n    </form>\r\n  </Modal>\r\n)","import {h} from 'hyperapp'\r\nimport {Link} from \"@hyperapp/router\"\r\n\r\n\r\nimport {MainMenu} from './components/MainMenu/MainMenu'\r\nimport {BubbleView} from './components/BubbleView/BubbleView'\r\nimport {ThreadPanel} from './components/ThreadPanel/ThreadPanel'\r\n\r\nimport {LoginForm} from './components/LoginForm/LoginForm'\r\n\r\n// Bundle css\r\nimport 'sanitize.css'\r\nimport './global.css'\r\n\r\n// Application root\r\nexport const view = (state, actions) => {\r\n  console.log(state);\r\n  return (\r\n    <div class=\"app\">\r\n      <MainMenu />\r\n      <BubbleView />\r\n      {state.threadPanelOpened ? <ThreadPanel /> : null}\r\n      {state.loginForm && state.loginForm.opened ? <LoginForm {...state.loginForm} /> : null}\r\n    </div>\r\n  )\r\n}\r\n","\r\n// Load our hyperapp\r\nimport {app} from 'hyperapp'\r\nimport {location} from \"@hyperapp/router\"\r\nimport {state} from './state/'\r\nimport {actions} from './actions/'\r\nimport {view} from './views/'\r\n\r\n\r\n\r\n// Start hyperapp\r\nwindow.main = app(state, actions, view, document.body);\r\n\r\nwindow.main.init();\r\n\r\n\r\n\r\n\r\n// // Activate the service worker\r\n// if ('serviceWorker' in navigator) {\r\n//   window.addEventListener('load', function() {\r\n//     navigator.serviceWorker.register('/sw.js').then(function(registration) {\r\n//       // Registration was successful\r\n//       console.log('ServiceWorker registration successful with scope: ', registration.scope);\r\n//     }, function(err) {\r\n//       // registration failed :(\r\n//       console.log('ServiceWorker registration failed: ', err);\r\n//     });\r\n//   });\r\n// }\r\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}